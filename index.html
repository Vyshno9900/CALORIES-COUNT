<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Vyshno Calorie Tracker</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  .highlight { background-color: yellow; font-weight: bold; }
</style>
</head>
<body>
<h1>Vyshno Calorie Tracker üçé</h1>

<input type="text" id="foodInput" placeholder="Enter food items" />
<button id="askBtn">Ask Gemini</button>

<div id="response" style="margin-top: 20px; line-height: 1.6;"></div>

<script>
const BACKEND_URL = "https://cal-count-backend-2.onrender.com/api/gemini";

document.getElementById("askBtn").addEventListener("click", async () => {
  const prompt = document.getElementById("foodInput").value;
  if (!prompt) return;

  const responseEl = document.getElementById("response");
  responseEl.innerText = "Loading...";

  try {
    const res = await fetch(BACKEND_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ prompt }),
    });

    const data = await res.json();
    let text = data.text || "No response";

    // Remove Markdown bold (**text**)
    text = text.replace(/\*\*(.*?)\*\*/g, "$1");

    // Highlight the word "calories" and all numbers
    text = text.replace(/(\bcalories\b|\d+(\.\d+)?)/gi, '<span class="highlight">$1</span>');

    responseEl.innerHTML = text;

  } catch (err) {
    responseEl.innerText = "Error: " + err.message;
  }
});
</script>
</body>
</html>
